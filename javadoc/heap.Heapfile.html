<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<!-- Generated by javadoc on Thu Dec 10 23:29:23 CST 1998 -->
<title>
  Class heap.Heapfile
</title>
</head>
<body>
<a name="_top_"></a>
<pre>
<a href="packages.html">All Packages</a>  <a href="tree.html">Class Hierarchy</a>  <a href="Package-heap.html">This Package</a>  <a href="heap.HFPage.html#_top_">Previous</a>  <a href="heap.Scan.html#_top_">Next</a>  <a href="AllNames.html">Index</a></pre>
<hr>
<h1>
  Class heap.Heapfile
</h1>
<pre>
java.lang.Object
   |
   +----heap.Heapfile
</pre>
<hr>
<dl>
  <dt> public class <b>Heapfile</b>
  <dt> extends Object
  <dt> implements Filetype, <a href="global.GlobalConst.html#_top_">GlobalConst</a>
</dl>
<hr>
<a name="index"></a>
<h2>
  <img src="images/constructor-index.gif" width=275 height=38 alt="Constructor Index">
</h2>
<dl>
  <dt> <img src="images/yellow-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#Heapfile(java.lang.String)"><b>Heapfile</b></a>(String)
  <dd> Initialize.
</dl>
<h2>
  <img src="images/method-index.gif" width=207 height=38 alt="Method Index">
</h2>
<dl>
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#deleteFile()"><b>deleteFile</b></a>()
  <dd> Delete the file from the database.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#deleteRecord(global.RID)"><b>deleteRecord</b></a>(RID)
  <dd> Delete record from file with given rid.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getRecCnt()"><b>getRecCnt</b></a>()
  <dd> Return number of records in file.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getRecord(global.RID)"><b>getRecord</b></a>(RID)
  <dd> Read record from file, returning pointer and length.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#insertRecord(byte[])"><b>insertRecord</b></a>(byte[])
  <dd> Insert record into file, return its Rid.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#openScan()"><b>openScan</b></a>()
  <dd> Initiate a sequential scan.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#updateRecord(global.RID, heap.Tuple)"><b>updateRecord</b></a>(RID, Tuple)
  <dd> Updates the specified record in the heapfile.
</dl>
<a name="constructors"></a>
<h2>
  <img src="images/constructors.gif" width=231 height=38 alt="Constructors">
</h2>
<a name="Heapfile"></a>
<a name="Heapfile(java.lang.String)"><img src="images/yellow-ball.gif" width=12 height=12 alt=" o "></a>
<b>Heapfile</b>
<pre>
 public Heapfile(String name) throws <a href="heap.HFException.html#_top_">HFException</a>, <a href="heap.HFBufMgrException.html#_top_">HFBufMgrException</a>, <a href="heap.HFDiskMgrException.html#_top_">HFDiskMgrException</a>, IOException
</pre>
<dl>
  <dd> Initialize.  A null name produces a temporary heapfile which will be
 deleted by the destructor.  If the name already denotes a file, the
 file is opened; otherwise, a new empty file is created.
<p>
  <dd><dl>
    <dt> <b>Throws:</b> <a href="heap.HFException.html#_top_">HFException</a>
    <dd> heapfile exception
    <dt> <b>Throws:</b> <a href="heap.HFBufMgrException.html#_top_">HFBufMgrException</a>
    <dd> exception thrown from bufmgr layer
    <dt> <b>Throws:</b> <a href="heap.HFDiskMgrException.html#_top_">HFDiskMgrException</a>
    <dd> exception thrown from diskmgr layer
    <dt> <b>Throws:</b> IOException
    <dd> I/O errors
  </dl></dd>
</dl>
<a name="methods"></a>
<h2>
  <img src="images/methods.gif" width=151 height=38 alt="Methods">
</h2>
<a name="getRecCnt()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getRecCnt"><b>getRecCnt</b></a>
<pre>
 public int getRecCnt() throws <a href="heap.InvalidSlotNumberException.html#_top_">InvalidSlotNumberException</a>, <a href="heap.InvalidTupleSizeException.html#_top_">InvalidTupleSizeException</a>, <a href="heap.HFDiskMgrException.html#_top_">HFDiskMgrException</a>, <a href="heap.HFBufMgrException.html#_top_">HFBufMgrException</a>, IOException
</pre>
<dl>
  <dd> Return number of records in file.
<p>
  <dd><dl>
    <dt> <b>Throws:</b> <a href="heap.InvalidSlotNumberException.html#_top_">InvalidSlotNumberException</a>
    <dd> invalid slot number
    <dt> <b>Throws:</b> <a href="heap.InvalidTupleSizeException.html#_top_">InvalidTupleSizeException</a>
    <dd> invalid tuple size
    <dt> <b>Throws:</b> <a href="heap.HFBufMgrException.html#_top_">HFBufMgrException</a>
    <dd> exception thrown from bufmgr layer
    <dt> <b>Throws:</b> <a href="heap.HFDiskMgrException.html#_top_">HFDiskMgrException</a>
    <dd> exception thrown from diskmgr layer
    <dt> <b>Throws:</b> IOException
    <dd> I/O errors
  </dl></dd>
</dl>
<a name="insertRecord(byte[])"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="insertRecord"><b>insertRecord</b></a>
<pre>
 public <a href="global.RID.html#_top_">RID</a> insertRecord(byte recPtr[]) throws <a href="heap.InvalidSlotNumberException.html#_top_">InvalidSlotNumberException</a>, <a href="heap.InvalidTupleSizeException.html#_top_">InvalidTupleSizeException</a>, <a href="heap.SpaceNotAvailableException.html#_top_">SpaceNotAvailableException</a>, <a href="heap.HFException.html#_top_">HFException</a>, <a href="heap.HFBufMgrException.html#_top_">HFBufMgrException</a>, <a href="heap.HFDiskMgrException.html#_top_">HFDiskMgrException</a>, IOException
</pre>
<dl>
  <dd> Insert record into file, return its Rid.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> recPtr - pointer of the record
    <dd> recLen - the length of the record
    <dt> <b>Returns:</b>
    <dd> the rid of the record
    <dt> <b>Throws:</b> <a href="heap.InvalidSlotNumberException.html#_top_">InvalidSlotNumberException</a>
    <dd> invalid slot number
    <dt> <b>Throws:</b> <a href="heap.InvalidTupleSizeException.html#_top_">InvalidTupleSizeException</a>
    <dd> invalid tuple size
    <dt> <b>Throws:</b> <a href="heap.SpaceNotAvailableException.html#_top_">SpaceNotAvailableException</a>
    <dd> no space left
    <dt> <b>Throws:</b> <a href="heap.HFException.html#_top_">HFException</a>
    <dd> heapfile exception
    <dt> <b>Throws:</b> <a href="heap.HFBufMgrException.html#_top_">HFBufMgrException</a>
    <dd> exception thrown from bufmgr layer
    <dt> <b>Throws:</b> <a href="heap.HFDiskMgrException.html#_top_">HFDiskMgrException</a>
    <dd> exception thrown from diskmgr layer
    <dt> <b>Throws:</b> IOException
    <dd> I/O errors
  </dl></dd>
</dl>
<a name="deleteRecord(global.RID)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="deleteRecord"><b>deleteRecord</b></a>
<pre>
 public boolean deleteRecord(<a href="global.RID.html#_top_">RID</a> rid) throws <a href="heap.InvalidSlotNumberException.html#_top_">InvalidSlotNumberException</a>, <a href="heap.InvalidTupleSizeException.html#_top_">InvalidTupleSizeException</a>, <a href="heap.HFException.html#_top_">HFException</a>, <a href="heap.HFBufMgrException.html#_top_">HFBufMgrException</a>, <a href="heap.HFDiskMgrException.html#_top_">HFDiskMgrException</a>, Exception
</pre>
<dl>
  <dd> Delete record from file with given rid.
<p>
  <dd><dl>
    <dt> <b>Returns:</b>
    <dd> true record deleted  false:record not found
    <dt> <b>Throws:</b> <a href="heap.InvalidSlotNumberException.html#_top_">InvalidSlotNumberException</a>
    <dd> invalid slot number
    <dt> <b>Throws:</b> <a href="heap.InvalidTupleSizeException.html#_top_">InvalidTupleSizeException</a>
    <dd> invalid tuple size
    <dt> <b>Throws:</b> <a href="heap.HFException.html#_top_">HFException</a>
    <dd> heapfile exception
    <dt> <b>Throws:</b> <a href="heap.HFBufMgrException.html#_top_">HFBufMgrException</a>
    <dd> exception thrown from bufmgr layer
    <dt> <b>Throws:</b> <a href="heap.HFDiskMgrException.html#_top_">HFDiskMgrException</a>
    <dd> exception thrown from diskmgr layer
    <dt> <b>Throws:</b> Exception
    <dd> other exception
  </dl></dd>
</dl>
<a name="updateRecord(global.RID, heap.Tuple)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="updateRecord"><b>updateRecord</b></a>
<pre>
 public boolean updateRecord(<a href="global.RID.html#_top_">RID</a> rid,
                             <a href="heap.Tuple.html#_top_">Tuple</a> newtuple) throws <a href="heap.InvalidSlotNumberException.html#_top_">InvalidSlotNumberException</a>, <a href="heap.InvalidUpdateException.html#_top_">InvalidUpdateException</a>, <a href="heap.InvalidTupleSizeException.html#_top_">InvalidTupleSizeException</a>, <a href="heap.HFException.html#_top_">HFException</a>, <a href="heap.HFDiskMgrException.html#_top_">HFDiskMgrException</a>, <a href="heap.HFBufMgrException.html#_top_">HFBufMgrException</a>, Exception
</pre>
<dl>
  <dd> Updates the specified record in the heapfile.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> rid: - the record which needs update
    <dd> newtuple: - the new content of the record
    <dt> <b>Returns:</b>
    <dd> ture:update success   false: can't find the record
    <dt> <b>Throws:</b> <a href="heap.InvalidSlotNumberException.html#_top_">InvalidSlotNumberException</a>
    <dd> invalid slot number
    <dt> <b>Throws:</b> <a href="heap.InvalidUpdateException.html#_top_">InvalidUpdateException</a>
    <dd> invalid update on record
    <dt> <b>Throws:</b> <a href="heap.InvalidTupleSizeException.html#_top_">InvalidTupleSizeException</a>
    <dd> invalid tuple size
    <dt> <b>Throws:</b> <a href="heap.HFException.html#_top_">HFException</a>
    <dd> heapfile exception
    <dt> <b>Throws:</b> <a href="heap.HFBufMgrException.html#_top_">HFBufMgrException</a>
    <dd> exception thrown from bufmgr layer
    <dt> <b>Throws:</b> <a href="heap.HFDiskMgrException.html#_top_">HFDiskMgrException</a>
    <dd> exception thrown from diskmgr layer
    <dt> <b>Throws:</b> Exception
    <dd> other exception
  </dl></dd>
</dl>
<a name="getRecord(global.RID)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getRecord"><b>getRecord</b></a>
<pre>
 public <a href="heap.Tuple.html#_top_">Tuple</a> getRecord(<a href="global.RID.html#_top_">RID</a> rid) throws <a href="heap.InvalidSlotNumberException.html#_top_">InvalidSlotNumberException</a>, <a href="heap.InvalidTupleSizeException.html#_top_">InvalidTupleSizeException</a>, <a href="heap.HFException.html#_top_">HFException</a>, <a href="heap.HFDiskMgrException.html#_top_">HFDiskMgrException</a>, <a href="heap.HFBufMgrException.html#_top_">HFBufMgrException</a>, Exception
</pre>
<dl>
  <dd> Read record from file, returning pointer and length.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> rid - Record ID
    <dt> <b>Returns:</b>
    <dd> a Tuple. if Tuple==null, no more tuple
    <dt> <b>Throws:</b> <a href="heap.InvalidSlotNumberException.html#_top_">InvalidSlotNumberException</a>
    <dd> invalid slot number
    <dt> <b>Throws:</b> <a href="heap.InvalidTupleSizeException.html#_top_">InvalidTupleSizeException</a>
    <dd> invalid tuple size
    <dt> <b>Throws:</b> <a href="heap.SpaceNotAvailableException.html#_top_">SpaceNotAvailableException</a>
    <dd> no space left
    <dt> <b>Throws:</b> <a href="heap.HFException.html#_top_">HFException</a>
    <dd> heapfile exception
    <dt> <b>Throws:</b> <a href="heap.HFBufMgrException.html#_top_">HFBufMgrException</a>
    <dd> exception thrown from bufmgr layer
    <dt> <b>Throws:</b> <a href="heap.HFDiskMgrException.html#_top_">HFDiskMgrException</a>
    <dd> exception thrown from diskmgr layer
    <dt> <b>Throws:</b> Exception
    <dd> other exception
  </dl></dd>
</dl>
<a name="openScan()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="openScan"><b>openScan</b></a>
<pre>
 public <a href="heap.Scan.html#_top_">Scan</a> openScan() throws <a href="heap.InvalidTupleSizeException.html#_top_">InvalidTupleSizeException</a>, IOException
</pre>
<dl>
  <dd> Initiate a sequential scan.
<p>
  <dd><dl>
    <dt> <b>Throws:</b> <a href="heap.InvalidTupleSizeException.html#_top_">InvalidTupleSizeException</a>
    <dd> Invalid tuple size
    <dt> <b>Throws:</b> IOException
    <dd> I/O errors
  </dl></dd>
</dl>
<a name="deleteFile()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="deleteFile"><b>deleteFile</b></a>
<pre>
 public void deleteFile() throws <a href="heap.InvalidSlotNumberException.html#_top_">InvalidSlotNumberException</a>, <a href="heap.FileAlreadyDeletedException.html#_top_">FileAlreadyDeletedException</a>, <a href="heap.InvalidTupleSizeException.html#_top_">InvalidTupleSizeException</a>, <a href="heap.HFBufMgrException.html#_top_">HFBufMgrException</a>, <a href="heap.HFDiskMgrException.html#_top_">HFDiskMgrException</a>, IOException
</pre>
<dl>
  <dd> Delete the file from the database.
<p>
  <dd><dl>
    <dt> <b>Throws:</b> <a href="heap.InvalidSlotNumberException.html#_top_">InvalidSlotNumberException</a>
    <dd> invalid slot number
    <dt> <b>Throws:</b> <a href="heap.InvalidTupleSizeException.html#_top_">InvalidTupleSizeException</a>
    <dd> invalid tuple size
    <dt> <b>Throws:</b> <a href="heap.FileAlreadyDeletedException.html#_top_">FileAlreadyDeletedException</a>
    <dd> file is deleted already
    <dt> <b>Throws:</b> <a href="heap.HFBufMgrException.html#_top_">HFBufMgrException</a>
    <dd> exception thrown from bufmgr layer
    <dt> <b>Throws:</b> <a href="heap.HFDiskMgrException.html#_top_">HFDiskMgrException</a>
    <dd> exception thrown from diskmgr layer
    <dt> <b>Throws:</b> IOException
    <dd> I/O errors
  </dl></dd>
</dl>
<hr>
<pre>
<a href="packages.html">All Packages</a>  <a href="tree.html">Class Hierarchy</a>  <a href="Package-heap.html">This Package</a>  <a href="heap.HFPage.html#_top_">Previous</a>  <a href="heap.Scan.html#_top_">Next</a>  <a href="AllNames.html">Index</a></pre>
</body>
</html>
