<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<!-- Generated by javadoc on Thu Dec 10 23:29:23 CST 1998 -->
<title>
  Class btree.BT
</title>
</head>
<body>
<a name="_top_"></a>
<pre>
<a href="packages.html">All Packages</a>  <a href="tree.html">Class Hierarchy</a>  <a href="Package-btree.html">This Package</a>  <a href="Package-btree.html">Previous</a>  <a href="btree.BTFileScan.html#_top_">Next</a>  <a href="AllNames.html">Index</a></pre>
<hr>
<h1>
  Class btree.BT
</h1>
<pre>
java.lang.Object
   |
   +----btree.BT
</pre>
<hr>
<dl>
  <dt> public class <b>BT</b>
  <dt> extends Object
  <dt> implements <a href="global.GlobalConst.html#_top_">GlobalConst</a>
</dl>
This file contains, among some debug utilities, the interface to our
 key and data abstraction.  The BTLeafPage and BTIndexPage code
 know very little about the various key types.  
 Essentially we provide a way for those classes to package and 
 unpackage <key,data> pairs in a space-efficient manner.  That is, the 
 packaged result contains the key followed immediately by the data value; 
 No padding bytes are used (not even for alignment). 
 Furthermore, the BT<*>Page classes need
 not know anything about the possible AttrType values, since all 
 their processing of <key,data> pairs is done by the functions 
 declared here.
 In addition to packaging/unpacking of <key,value> pairs, we 
 provide a keyCompare function for the (obvious) purpose of
 comparing keys of arbitrary type (as long as they are defined 
 here).
 For debug utilities, you could implement methods to print any page
 or the whole B+ tree structure or all leaf pages.
<p>
<hr>
<a name="index"></a>
<h2>
  <img src="images/constructor-index.gif" width=275 height=38 alt="Constructor Index">
</h2>
<dl>
  <dt> <img src="images/yellow-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#BT()"><b>BT</b></a>()
  <dd> 
</dl>
<h2>
  <img src="images/method-index.gif" width=207 height=38 alt="Method Index">
</h2>
<dl>
  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getBytesFromEntry(btree.KeyDataEntry)"><b>getBytesFromEntry</b></a>(KeyDataEntry)
  <dd> It convert a keyDataEntry to byte[].
  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getDataLength(short)"><b>getDataLength</b></a>(short)
  <dd> It gets the length of the data 

  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getEntryFromBytes(byte[], int, int, int, short)"><b>getEntryFromBytes</b></a>(byte[], int, int, int, short)
  <dd> It gets an keyDataEntry from bytes array and position

  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getKeyDataLength(btree.KeyClass, short)"><b>getKeyDataLength</b></a>(KeyClass, short)
  <dd> It gets the length of the (key,data) pair in leaf or index page.
  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getKeyLength(btree.KeyClass)"><b>getKeyLength</b></a>(KeyClass)
  <dd> It gets the length of the key

  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#keyCompare(btree.KeyClass, btree.KeyClass)"><b>keyCompare</b></a>(KeyClass, KeyClass)
  <dd> It compares two keys.
</dl>
<a name="constructors"></a>
<h2>
  <img src="images/constructors.gif" width=231 height=38 alt="Constructors">
</h2>
<a name="BT"></a>
<a name="BT()"><img src="images/yellow-ball.gif" width=12 height=12 alt=" o "></a>
<b>BT</b>
<pre>
 public BT()
</pre>
<a name="methods"></a>
<h2>
  <img src="images/methods.gif" width=151 height=38 alt="Methods">
</h2>
<a name="keyCompare(btree.KeyClass, btree.KeyClass)"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="keyCompare"><b>keyCompare</b></a>
<pre>
 public static final int keyCompare(<a href="btree.KeyClass.html#_top_">KeyClass</a> key1,
                                    <a href="btree.KeyClass.html#_top_">KeyClass</a> key2) throws <a href="btree.KeyNotMatchException.html#_top_">KeyNotMatchException</a>
</pre>
<dl>
  <dd> It compares two keys.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> key1 - the first key to compare. Input parameter.
    <dd> key2 - the second key to compare. Input parameter.
    <dt> <b>Returns:</b>
    <dd> return negative if key1 less than key2; positive if key1 bigger
 than  key2; 
 0 if key1=key2.
    <dt> <b>Throws:</b> <a href="btree.KeyNotMatchException.html#_top_">KeyNotMatchException</a>
    <dd> key is not IntegerKey or StringKey class
  </dl></dd>
</dl>
<a name="getKeyLength(btree.KeyClass)"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getKeyLength"><b>getKeyLength</b></a>
<pre>
 public static final int getKeyLength(<a href="btree.KeyClass.html#_top_">KeyClass</a> key) throws <a href="btree.KeyNotMatchException.html#_top_">KeyNotMatchException</a>, IOException
</pre>
<dl>
  <dd> It gets the length of the key
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> key - specify the key whose length will be calculated.
 Input parameter.
    <dt> <b>Returns:</b>
    <dd> return the length of the key
    <dt> <b>Throws:</b> <a href="btree.KeyNotMatchException.html#_top_">KeyNotMatchException</a>
    <dd> key is neither StringKey nor  IntegerKey
    <dt> <b>Throws:</b> IOException
    <dd> error  from the lower layer
  </dl></dd>
</dl>
<a name="getDataLength(short)"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getDataLength"><b>getDataLength</b></a>
<pre>
 public static final int getDataLength(short pageType) throws <a href="btree.NodeNotMatchException.html#_top_">NodeNotMatchException</a>
</pre>
<dl>
  <dd> It gets the length of the data
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> pageType - NodeType.LEAF or  NodeType.INDEX. Input parameter.
    <dt> <b>Returns:</b>
    <dd> return 8 if it is of NodeType.LEA;
  return 4 if it is of NodeType.INDEX.
    <dt> <b>Throws:</b> <a href="btree.NodeNotMatchException.html#_top_">NodeNotMatchException</a>
    <dd> pageType is neither NodeType.LEAF
  nor NodeType.INDEX.
  </dl></dd>
</dl>
<a name="getKeyDataLength(btree.KeyClass, short)"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getKeyDataLength"><b>getKeyDataLength</b></a>
<pre>
 public static final int getKeyDataLength(<a href="btree.KeyClass.html#_top_">KeyClass</a> key,
                                          short pageType) throws <a href="btree.KeyNotMatchException.html#_top_">KeyNotMatchException</a>, <a href="btree.NodeNotMatchException.html#_top_">NodeNotMatchException</a>, IOException
</pre>
<dl>
  <dd> It gets the length of the (key,data) pair in leaf or index page.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> key - an object of KeyClass.  Input parameter.
    <dd> pageType - NodeType.LEAF or  NodeType.INDEX. Input parameter.
    <dt> <b>Returns:</b>
    <dd> return the lenrth of the (key,data) pair.
    <dt> <b>Throws:</b> <a href="btree.KeyNotMatchException.html#_top_">KeyNotMatchException</a>
    <dd> key is neither StringKey nor  IntegerKey
    <dt> <b>Throws:</b> <a href="btree.NodeNotMatchException.html#_top_">NodeNotMatchException</a>
    <dd> pageType is neither NodeType.LEAF
  nor NodeType.INDEX.
    <dt> <b>Throws:</b> IOException
    <dd> error from the lower layer
  </dl></dd>
</dl>
<a name="getEntryFromBytes(byte[], int, int, int, short)"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getEntryFromBytes"><b>getEntryFromBytes</b></a>
<pre>
 public static final <a href="btree.KeyDataEntry.html#_top_">KeyDataEntry</a> getEntryFromBytes(byte from[],
                                                    int offset,
                                                    int length,
                                                    int keyType,
                                                    short nodeType) throws <a href="btree.KeyNotMatchException.html#_top_">KeyNotMatchException</a>, <a href="btree.NodeNotMatchException.html#_top_">NodeNotMatchException</a>, <a href="btree.ConvertException.html#_top_">ConvertException</a>
</pre>
<dl>
  <dd> It gets an keyDataEntry from bytes array and position
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> from - It's a bytes array where KeyDataEntry will come from.
 Input parameter.
    <dd> offset - the offset in the bytes. Input parameter.
    <dd> keyType - It specifies the type of key. It can be
               AttrType.attrString or AttrType.attrInteger.
               Input parameter.
    <dd> nodeType - It specifes NodeType.LEAF or NodeType.INDEX.
                Input parameter.
    <dd> length - The length of (key, data) in byte array "from".
               Input parameter.
    <dt> <b>Returns:</b>
    <dd> return a KeyDataEntry object
    <dt> <b>Throws:</b> <a href="btree.KeyNotMatchException.html#_top_">KeyNotMatchException</a>
    <dd> key is neither StringKey nor  IntegerKey
    <dt> <b>Throws:</b> <a href="btree.NodeNotMatchException.html#_top_">NodeNotMatchException</a>
    <dd> nodeType is neither NodeType.LEAF
  nor NodeType.INDEX.
    <dt> <b>Throws:</b> <a href="btree.ConvertException.html#_top_">ConvertException</a>
    <dd> error from the lower layer
  </dl></dd>
</dl>
<a name="getBytesFromEntry(btree.KeyDataEntry)"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getBytesFromEntry"><b>getBytesFromEntry</b></a>
<pre>
 public static final byte[] getBytesFromEntry(<a href="btree.KeyDataEntry.html#_top_">KeyDataEntry</a> entry) throws <a href="btree.KeyNotMatchException.html#_top_">KeyNotMatchException</a>, <a href="btree.NodeNotMatchException.html#_top_">NodeNotMatchException</a>, <a href="btree.ConvertException.html#_top_">ConvertException</a>
</pre>
<dl>
  <dd> It convert a keyDataEntry to byte[].
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> entry - specify  the data entry. Input parameter.
    <dt> <b>Returns:</b>
    <dd> return a byte array with size equal to the size of (key,data).
    <dt> <b>Throws:</b> <a href="btree.KeyNotMatchException.html#_top_">KeyNotMatchException</a>
    <dd> entry.key is neither StringKey nor  IntegerKey
    <dt> <b>Throws:</b> <a href="btree.NodeNotMatchException.html#_top_">NodeNotMatchException</a>
    <dd> entry.data is neither LeafData nor IndexData
    <dt> <b>Throws:</b> <a href="btree.ConvertException.html#_top_">ConvertException</a>
    <dd> error from converting from entry to bytes
  </dl></dd>
</dl>
<hr>
<pre>
<a href="packages.html">All Packages</a>  <a href="tree.html">Class Hierarchy</a>  <a href="Package-btree.html">This Package</a>  <a href="Package-btree.html">Previous</a>  <a href="btree.BTFileScan.html#_top_">Next</a>  <a href="AllNames.html">Index</a></pre>
</body>
</html>
